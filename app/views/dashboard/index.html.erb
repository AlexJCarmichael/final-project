<h4>Dashboard for <%= current_user.user_name %></h4>

<div class='row'>
  <div class='card dash-display col s12 m7 important-card'>
    <h5 class='clicky-button'>Games</h5>
    <div class='hide-on-small-only expand-me'>
      <%= react_component('NewGame', controller: "game_sessions", redirect_controller: "game_sessions",
                          name: "session_name", sheet_id: 1, display_name: "New game",
                          placeholder: "Type in a game name") %>
      <% @sessions.each do |session| %>
      <h6><%= link_to "#{session.session_name}", game_session_path("#{session.id}") %></h6>
        <% session.characters.each do |char| %>
          <p><%= char.user.name %> playing as <%= char.name %></p>
        <% end %>
      <% end %>
    </div>
  </div>

  <div class='card dash-display col s12 m3 offset-m1'>
    <h5 class='clicky-button'>Characters</h5>
    <div class='hide-on-small-only expand-me'>
      <% @characters.each do |char| %>
        <p><a class="character_sheet" href="#character_sheet_modal"><%= "#{char.name}" %></a></p>
        <div class="character_sheet_modal modal">
          <%= render partial: 'layouts/character_sheet', :locals => { :char => char } %>
        </div>
      <% end %>
      <strong>Create new characters from a game session</strong>
    </div>
  </div>

  <div class='card dash-display col s12 m3 offset-m1 md-top-margin'>
    <h5 class='clicky-button'>Friends</h5>
    <div class='hide-on-small-only expand-me'>
      <%#TODO: Change this to react ajax after project, currenly an a-tag that redirect_to back%>
      <%= react_component('UserSearch', buttonStyle: "clicky-button btn right", userInvite: true) %>
      <% if @friends.empty? %>
        <p>No user's have accepted a friend request</p>
      <% else %>
        <% @friends.each do |friend| %>
          <p><%= link_to "#{friend.name}", user_path(friend.id) %></p>
        <% end %>
      <% end %>
      <h5 class='center-text'>Pending Friends</h5>
      <% @pending.each do |pend| %>
        <p>
          <% if pend.user.name == current_user.name %>
            <%= link_to "#{pend.to_user.name}", user_path(pend.to_user.id) %>
            <span>Awaiting approval</span>
          <% else %>
            <%= link_to "#{pend.user.name}", user_path(pend.user.id) %>
            <%= link_to "Accept", acceptance_users_path(from: pend.user_id, to: current_user.id), method: :put %>
            <%= link_to "Decline", denial_users_path(from: pend.user_id, to: current_user.id), method: :put %>
          <% end %>
        </p>
      <% end %>
    </div>
  </div>
</div>

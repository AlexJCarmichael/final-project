<h4><%= current_user.name %>'s Tavern </h4>

<div class='row'>
  <div class='col s12 m7'>
    <div class='row'>
      <div class='col s6'>
        <h5>Games</h5>
      </div>
      <div class='col s6'>
        <%= react_component('NewGame', controller: "game_sessions", redirect_controller: "game_sessions",
                            name: "session_name", sheet_id: 1, display_name: "New game",
                            placeholder: "Type in a game name") %>
      </div>
    </div>
  <div>
    <% @sessions.each do |session| %>
      <div class='card'>
        <h5 class='center plain'><%= link_to "#{session.session_name}", game_session_path("#{session.id}") %></h5>
        <p class='small-left-margin'>
          <%= session.actors.count %>
          <i class="person-icon material-icons">portrait</i>
          <span class='session-border'><%= session.sheet_template.game_name %></span>
          <span class="right small-right-margin"><%=session.game_time.strftime("%A %l%P")%></span>
        </p>
      </div>
      <% end %>
    </div>
  </div>

  <h5 class='clicky-button'>Friends</h5>
  <div class='col s12 m4 offset-m1 md-top-margin'>
    <div class='hide-on-small-only expand-me'>
      <%#TODO: Change this to react ajax after project, currenly an a-tag that redirect_to back%>
      <%= react_component('UserSearch', buttonStyle: "center", divStyle: "card", headerText: "Request a friend", userInvite: true) %>
      <% if @friends.empty? %>
        <p class='card'>No user's have accepted a friend request</p>
      <% else %>
        <% @friends.each do |friend| %>
          <p class='card plain'>
            <img className="z-depth-2 responsive-img" src="<%= friend.photo_url %>" />
            <%= link_to "#{friend.name}", user_path(friend.id) %>
          </p>
        <% end %>
      <% end %>
      <% @pending.each do |pend| %>
        <p class='card plain'>
          <% if pend.user.name == current_user.name %>
            <%= link_to "#{pend.to_user.name}", user_path(pend.to_user.id) %>
            <span>Awaiting approval</span>
          <% else %>
            <%= link_to "#{pend.user.name} |", user_path(pend.user.id) %>
            <%= link_to "Accept", acceptance_users_path(from: pend.user_id, to: current_user.id), method: :put %>
            <span> or </span>
            <%= link_to "Decline", denial_users_path(from: pend.user_id, to: current_user.id), method: :put %>
          <% end %>
        </p>
      <% end %>
    </div>
  </div>
</div>
